(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[23],{214:function(t,e,i){"use strict";i(217);var n=i(70),s=i.n(n),a=i(210),c="";c="http://localhost:3000";var r=i.n(a).a.create({baseURL:c,timeout:12e3,withCredentials:!0});r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return 200!==t.status&&(s.a.destroy(),s.a.error("\u7cfb\u7edf\u9519\u8bef")),t}),(function(t){return-1!==t.message.search("timeout")?t.message="\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u4fdd\u6301\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u3002":t.message="\u7cfb\u7edf\u8bf7\u6c42\u5f02\u5e38",s.a.destroy(),s.a.error(t.message),Promise.reject(t)}));var o={homeApi:{getSearchSuggest:function(t,e){return r.get("/search/suggest",{params:{keywords:t,type:e}})},getSearch:function(t){return r.get("/cloudsearch",{params:t})},banner:function(){return r.get("/banner")},hotRecommend:function(t){return r.get("/personalized?limit=".concat(t))},recommendPlaylist:function(t){return r.get("/personalized?limit=".concat(t))},newDisk:function(){return r.get("/album/newest")},getAllNewDisk:function(t){return r.get("/album/new",{params:t})},getLyric:function(t){return r.get("/lyric?id=".concat(t))},getArtistList:function(t){return r.get("/artist/list",{params:t})},getPlaylistCateList:function(){return r.get("/playlist/catlist")},getTopPlayList:function(t){return r.get("/top/playlist",{params:t})},getPlaylistDetail:function(t){return r.get("/playlist/detail",{params:t})},getAlbumInfo:function(t){return r.get("/album?id=".concat(t))},getTopList:function(){return r.get("/toplist")},getSongUrl:function(t){return r.get("/song/url?id=".concat(t))}},loginApi:{phoneLogin:function(t){return r.post("/login/cellphone",t)},emailLogin:function(t){return r.post("/login",t)},generateQrKey:function(){return r.get("/login/qr/key?timestamp=".concat(Date.now()))},generateQrCode:function(t){return r.get("/login/qr/create?timestamp=".concat(Date.now()),{params:t})},checkQrStatus:function(t){return r.get("/login/qr/check?timestamp=".concat(Date.now()),{params:t})},getLoginStatus:function(){return r.get("/login/status?timestamp=".concat(Date.now()))},logout:function(){return r.get("/logout")}},userApi:{getUserDetail:function(t){return r.get("/user/detail?uid=".concat(t))},getUserInfoCount:function(){return r.get("/user/subcount")},getUserSongList:function(t){return r.get("/user/playlist",{params:t})},getUserRecord:function(t){return r.get("/user/record",{params:t})}},videoApi:{getMVDetail:function(t){return r.get("/mv/detail?mvid=".concat(t))},getMVUrl:function(t){return r.get("/mv/url",{params:t})}}};e.a=o},215:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(75),s=function(t){return{type:n.a,payload:t}}},216:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return c}));var n=i(47),s=function(){return{type:n.a}},a=function(){return{type:n.b}},c=function(){return{type:n.c}}},218:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return u}));var n=i(214),s=i(215),a=i(35),c=function(t){return{type:a.a,payload:t}},r=function(t){return{type:a.c,payload:t}},o=function(){return{type:a.b}},l=function(t){return{type:a.d,payload:t}},u=function(t,e){return function(i){n.a.homeApi.getPlaylistDetail({id:t}).then((function(t){if(200===t.data.code){var n,a=(null===(n=t.data.playlist)||void 0===n?void 0:n.tracks)||[];i(l(a)),a.length&&(i(Object(s.a)(a[0])),e&&e(a))}})).catch((function(){}))}}},539:function(t,e,i){t.exports={Toplist:"Toplist_Toplist__2jQGP",ToplistList:"Toplist_ToplistList__2BNCd",ToplistContent:"Toplist_ToplistContent__3nN9P",topListInfo:"Toplist_topListInfo__2xadw",topListWrapper:"Toplist_topListWrapper__3QCpT",topListTitle:"Toplist_topListTitle__1Uu-d",topListItemWrapper:"Toplist_topListItemWrapper__1Ka4w",topListItem:"Toplist_topListItem__2lI1N",title:"Toplist_title__b4rSJ",top:"Toplist_top__3zM60",rank:"Toplist_rank__26MRr",time:"Toplist_time__4nvXc",author:"Toplist_author__1imd4",dark:"Toplist_dark__2Eawn"}},576:function(t,e,i){"use strict";i.r(e);i(113);var n=i(78),s=i.n(n),a=(i(235),i(232)),c=i.n(a),r=i(71),o=i(369),l=i(289),u=i(597),d=i(252),p=i.n(d),m=i(0),j=i(219),b=i.n(j),f=i(41),v=i(214),g=i(215),h=i(216),O=i(218),x=i(30),y=i(539),_=i.n(y),N=i(9),T=Array(4).fill({}).map((function(t,e){return{id:e}})),L=function(t){var e,i,n=t.match,a=t.history,d=Object(m.useState)(T),j=Object(r.a)(d,2),f=j[0],y=j[1],L=Object(m.useState)(T),k=Object(r.a)(L,2),C=k[0],w=k[1],I=Object(m.useState)(),D=Object(r.a)(I,2),S=D[0],U=D[1],A=Object(m.useState)(!1),P=Object(r.a)(A,2),M=P[0],W=P[1];Object(m.useEffect)((function(){v.a.homeApi.getTopList().then((function(t){if(200===t.data.code){var e=t.data.list||[],i=["S","N","O","H"],n=[],s=[];e.forEach((function(t){i.includes(t.ToplistType)?n.push(t):s.push(t)})),y(n),w(s)}})).catch((function(){}))}),[]),Object(m.useEffect)((function(){var t,e=null===(t=n.params)||void 0===t?void 0:t.id;e&&(W(!0),v.a.homeApi.getPlaylistDetail({id:Number(e)}).then((function(t){if(W(!1),200===t.data.code){var e=t.data.playlist;U(e||{})}})).catch((function(){})))}),[null===(e=n.params)||void 0===e?void 0:e.id]);var q=Object(m.useCallback)((function(e){t.dispatch(Object(O.a)(e)),t.dispatch(Object(g.a)(e)),t.dispatch(Object(h.b)())}),[t]),Q=Object(m.useCallback)((function(e){t.dispatch(Object(O.a)(e))}),[t]),E=function(t){return t.map((function(t){var e;return Object(N.jsxs)("div",{className:"list-item ".concat(Number(null===(e=n.params)||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?"active":""),onClick:function(){var e;(e=t.id)&&a.push("/discover/toplist/".concat(e))},children:[Object(N.jsx)(b.a,{height:40,children:Object(N.jsx)("img",{className:"list-item-img",src:t.coverImgUrl+"?param=40y40",alt:"",title:t.description})}),Object(N.jsxs)("div",{className:"list-item-desc",children:[Object(N.jsx)("p",{className:"list-item-desc-t ellipsis-1",children:t.name}),Object(N.jsx)("p",{className:"list-item-desc-b ellipsis-1",children:t.updateFrequency})]})]},t.id)}))},R=Object(m.useCallback)((function(t){return t.map((function(t,e){var i,n,s;return Object(N.jsxs)("div",{className:[_.a.topListItem,e<=2?_.a.top:"",e%2?_.a.dark:""].join(" "),children:[Object(N.jsx)("div",{className:_.a.rank,children:e+1}),Object(N.jsxs)("div",{className:_.a.title,children:[e<=2?Object(N.jsx)("img",{src:(null===t||void 0===t||null===(i=t.al)||void 0===i?void 0:i.picUrl)+"?param=50y50",alt:""}):null,Object(N.jsx)(o.a,{title:"\u64ad\u653e\u5f53\u524d\u6b4c\u66f2",className:"icon",onClick:function(){return q(t)}}),Object(N.jsx)("span",{className:"song-name ellipsis-1",children:null===t||void 0===t?void 0:t.name}),Object(N.jsx)(l.a,{title:"\u6dfb\u52a0\u5230\u6b4c\u5355",className:"plus-icon",onClick:function(){return Q(t)}})]}),Object(N.jsx)("div",{className:_.a.time,children:(null===t||void 0===t?void 0:t.dt)?p()(null===t||void 0===t?void 0:t.dt).format("mm:ss"):""}),Object(N.jsx)("div",{className:[_.a.author,"ellipsis-1"].join(" "),children:(null===t||void 0===t||null===(n=t.ar)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.name)||""})]},t.id)}))}),[Q,q]);return Object(N.jsxs)("div",{className:[_.a.Toplist,"w980"].join(" "),children:[Object(N.jsxs)("div",{className:_.a.ToplistList,children:[Object(N.jsx)("h3",{children:"\u4e91\u97f3\u4e50\u7279\u8272\u699c"}),Object(N.jsx)("div",{className:"list1",children:E(f)}),Object(N.jsx)("h3",{children:"\u5168\u7403\u5a92\u4f53\u699c"}),Object(N.jsx)("div",{className:"list2",children:E(C)})]}),Object(N.jsxs)("div",{className:_.a.ToplistContent,children:[Object(N.jsxs)("div",{className:_.a.topListInfo,children:[Object(N.jsx)("img",{className:"logo",src:(null===S||void 0===S?void 0:S.coverImgUrl)?"".concat(null===S||void 0===S?void 0:S.coverImgUrl,"?param=158y158"):x.a.bg_placeholder_img,alt:""}),Object(N.jsxs)("div",{className:"content",children:[Object(N.jsx)("h1",{children:null===S||void 0===S?void 0:S.name}),Object(N.jsxs)("p",{children:[Object(N.jsx)(u.a,{})," \u6700\u8fd1\u66f4\u65b0\uff1a",(null===S||void 0===S?void 0:S.updateTime)?p()(null===S||void 0===S?void 0:S.updateTime).format("MM\u6708DD\u65e5"):""]}),Object(N.jsxs)("div",{className:"btns",children:[Object(N.jsxs)(c.a,{className:"btn",type:"primary",onClick:function(){var e=(null===S||void 0===S?void 0:S.tracks)||[];(null===e||void 0===e?void 0:e.length)&&(t.dispatch(Object(O.d)(e)),t.dispatch(Object(g.a)(e[0])),t.dispatch(Object(h.b)()))},children:[Object(N.jsx)(o.a,{}),"\u64ad\u653e\u699c\u5355"]}),Object(N.jsx)(c.a,{className:"btn",disabled:!0,children:"\u6536\u85cf"})]})]})]}),Object(N.jsxs)("div",{className:_.a.topListWrapper,children:[Object(N.jsxs)("div",{className:_.a.topListTitle,children:[Object(N.jsx)("h3",{children:"\u6b4c\u66f2\u5217\u8868"}),Object(N.jsxs)("span",{className:"songCount",children:[null===S||void 0===S||null===(i=S.tracks)||void 0===i?void 0:i.length,"\u9996\u6b4c"]}),Object(N.jsxs)("div",{className:"playCount",children:["\u64ad\u653e\uff1a",Object(N.jsx)("strong",{style:{color:"#c20c0c"},children:null===S||void 0===S?void 0:S.playCount}),"\u6b21"]})]}),Object(N.jsx)(s.a,{spinning:M,children:Object(N.jsxs)("div",{className:_.a.topListItemWrapper,children:[Object(N.jsxs)("div",{className:[_.a.topListItem,"list-title"].join(" "),children:[Object(N.jsx)("div",{className:_.a.rank}),Object(N.jsx)("div",{className:_.a.title,children:"\u6807\u9898"}),Object(N.jsx)("div",{className:_.a.time,children:"\u65f6\u957f"}),Object(N.jsx)("div",{className:_.a.author,children:"\u6b4c\u624b"})]}),R((null===S||void 0===S?void 0:S.tracks)||[])]})})]})]})]})};e.default=Object(f.connect)()(Object(m.memo)(L))}}]);